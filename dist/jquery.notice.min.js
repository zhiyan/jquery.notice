/*! jQuery Notice - v0.1.0 - 2014-03-12
* https://github.com/zhiyan/jquery.notice
* Copyright (c) 2014 ian; Licensed MIT */
!function(a){function b(b){var c,d=this,e=+new Date;c=a(this.tmpl(b.template,b)),this.options=b,this.source=c,this._id=e,this.buttons(),c.find("."+b.closeClass).on("click",a.proxy(d.close,d)),this.makeMask(),a("body").append(c),this.position(),f.on("resize",a.proxy(d.position,d)),b.esc&&this.esc()}var c,d,e=a(document),f=a(window);c={"class":"jnotice",type:"dialog",maskClass:"jnotice-mask",closeClass:"jnotice-close",headerClass:"jnotice-header",footerClass:"jnotice-footer",contentClass:"jnotice-content",buttonClassA:"jnotice-button-a",buttonClassB:"jnotice-button-b",width:"auto",height:"auto",position:"absolute",esc:!0,cancel:"取消",confirm:"确定"},c.template='<div class="{{class}} {{class}}-{{type}}" style="width:{{width}};height:{{height}};position:{{position}};"><h3 class="{{headerClass}}"><span>{{title}}</span><i class="{{closeClass}}">X</i></h3><div class="{{contentClass}}">{{content}}</div><div class="{{footerClass}}"></div></div>',c.buttonTemplate='<button class="{{class}}-button {{buttonClass}}">{{text}}</button>',d='<div class="{{maskClass}}"></div>',b.prototype={tmpl:function(b,c){return a.each(c,function(a,c){b=b.replace(new RegExp("{{"+a+"}}","g"),c||"")}),b=b.replace(/{{[^}]*}}/g,"")},close:function(){this.source.remove(),this.removeMask(),this.options.esc&&e.off("keydown")},position:function(){var a=this.source,b=a.width(),c=a.height();a.css({"margin-left":-b/2,"margin-top":-c/2}),"absolute"===a.css("position")&&a.css({top:e.scrollTop()+f.height()/2})},makeMask:function(){{var b=this.options,c=a("."+b.maskClass);b.mask}c.length?c.show():(c=a(this.tmpl(d,{maskClass:b.maskClass})),a("body").append(c)),this.mask=c},removeMask:function(){this.mask.hide()},esc:function(){var a=this;e.on("keydown",function(b){27===+b.keyCode&&a.close()})},buttons:function(){var a=this,b=this.options,c=this.source,d="";b.callback&&(d+=this.tmpl(b.buttonTemplate,{buttonClass:b.buttonClassA,text:b.confirm||"确定"}),c.on("click","."+b.buttonClassA,function(){b.callback(),a.close()})),b.cancel&&(d+=this.tmpl(b.buttonTemplate,{buttonClass:b.closeClass,"class":b.class,text:b.cancel})),c.find("."+b.footerClass).append(d)}},a.notice=function(d){return d=a.extend({},c,d),new b(d)}}(jQuery);